## Nextflow step up 


Key tools to install to develop or run pipelines in Nextflow. 
- VSC code: extensions needed (Docker, Nextflow ...? ) 
- JAVA
- Nextflow 
- Docker 
- Home Brew 

### Version Control
Similarly to other  Version control is an essential practice to track and manage changes when developing on Nextflow. Especially when multiple developers/teams work together on the same project (as we do in our Hackathons).



### Installing VSC code 
download the following extension: 
- Docker 
- Nextflow 
- Java (?)

### Installing Git Krarken (Version control): 
- Git Kraken (https://www.gitkraken.com/) install the free Desktop version 

### Setting up your dev directory 

Create new `dev` repository in home directory. This `dev` repository will be a container for nexflow script developing 
Inside `dev` create the `repos` and `test` directories 

### Cloning your first directory 
Now you are ready to clone any directory from github into your `dev` folder. 
How to clone with git Kraken: 
open git Kraken and click on `clone a repo`, here you can either clone a directory from a given URL or directly from git hub 
Cloning will automatically clone an external directory and its content into your home-direcotry folder. 

### Installing Homebrew: 
Paste the following into a macOS terminal or Linux shell prompt:
`/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"`
This script installs Homebrew to /usr/local for macOS Intel, /opt/homebrew for Apple Silicon, so that you don't need to type "sudo" to install packages.
The script will ask you to confirm each time it install a software package.
If you are using macOS, make sure you have command line tools (CTL) for Xcode installed. If not, type the following code before installation:
`xcode-select --install`



### Installing Java
Nextflow requires Java to be installed first. 
Use Home brew to install Java by following the instructions here https://devqa.io/brew-install-java/
 Did we installed java in usrbin???
`brew install cask java`
`ls -lsa /usr/local/Cellar/openjdk/`
`ls -lsa /usr/local/opt/openjdk`
`sudo ln -sfn /usr/local/opt/openjdk/libexec/openjdk.jdk /Library/Java/JavaVirtualMachines/openjdk.jdk`
`java -version`

### Installing Docker 
Type the following command in Homebrew to download the Docker package and run the installer:
`brew cask install docker`
To make sure the installation was succesful, type:
`docker --version`
If the command returns your Docker version, the installation was succesful. 
If the command does not return a version, try starting Docker daemon: 
Type "Docker" in Sporlight on mac or in the Application folder in Finder. 
Click the icon to run Docker deamon and then try the installation again. 

### Installing Nextflow

open your terminal and create a new directory called "usrbin": 
`mkdir usrbin`
`cd usrbin`
then run: `wget -qO- https://get.nextflow.io | bash`
This will create a main nextflow file in your current directory.
You may want to move this nextflow file to a different directory that is accessible by your $PATH variable, 
or add your current directory to your $PATH with export. 
First, check what directories are in your current $PATH variable by typing:
`echo $PATH`
If the output doesn't include the directory containing your main nextflow file, you can either move this file to an
existing path (by draggin and dropping) or you can add the directory containing this file to your path variable with export:
`sudo nano /etc/paths` then type `export PATH=$PATH:/my/custom/path`,
`echo "$PWD"`
This command should now return the path to your directory, containing the main nextflow file.
Check if the installation was successful by typing:
`nextflow -version`
If the command returns a version number, the installation was succesful.

#iTerm commands used: 
`conda install graphviz`
`docker build -f ./Dockerfile -t luslab/char-hicexplorer:latest .`




